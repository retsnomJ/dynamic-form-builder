# 动态表单数据格式说明

## 概述
本文档描述了用于构建动态表单的接口数据格式，包含字段配置信息和控制属性。

## 数据结构

接口返回一个**字段配置数组**，每个字段对象包含以下属性：

### 核心字段信息

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `fieldName` | string | 字段名称，用作表单字段的key | `"test_cal"`, `"updateTime"`, `"id"` |
| `fieldType` | string | 字段数据类型 | `"string"`, `"date"`, `"integer"`, `"float"` |
| `fieldLabel` | string | 字段显示标签 | `"测试计算"`, `"更新时间"`, `"产品id"` |

### 字段控制属性

| 字段名 | 类型 | 说明 | 可能值 |
|--------|------|------|--------|
| `visible` | boolean/null | 字段是否在表单中显示 | `true`, `false`, `null` |
| `editable` | boolean/null | 字段是否可编辑 | `true`, `false`, `null` |
| `required` | boolean/null | 字段是否必填 | `true`, `false`, `null` |
| `disable` | boolean/null | 字段是否禁用 | `true`, `false`, `null` |

### 字段分类

| 字段名 | 类型 | 说明 | 可能值 |
|--------|------|------|--------|
| `isCustom` | number | 字段类型标识 | `0` (固定字段), `1` (自定义字段) |
| `isCustomStr` | string | 字段类型描述 | `"固定字段"`, `"自定义字段"` |

### 逻辑字段相关

| 字段名 | 类型 | 说明 | 示例 |
|--------|------|------|------|
| `isLogic` | number | 是否为逻辑计算字段 | `0` (普通字段), `1` (逻辑字段) |
| `logic` | boolean | 逻辑字段标识 | `true`, `false` |
| `expression` | string | 计算表达式 | `"id + customonevalue"`, `""` |

## 字段类型支持

### 当前支持的字段类型

| 类型 | 说明 | 表单组件 |
|------|------|----------|
| `string` | 字符串类型 | `el-input` |
| `integer` | 整数类型 | `el-input-number` |
| `date` | 日期类型 | `el-date-picker` |
| `float` | 浮点数类型 | `el-input-number` |

## 动态表单构建逻辑

### 字段过滤规则

1. **可见性过滤**: `visible === true` 或 `visible === null`
2. **可编辑性过滤**: `editable === true`
3. **逻辑字段处理**: `isLogic === 1` 的字段可能需要特殊处理

### 表单验证规则

- **必填验证**: 当 `required === true` 时，添加必填验证
- **类型验证**: 根据 `fieldType` 添加相应的数据类型验证
- **自定义验证**: 可根据业务需求扩展

### 示例数据

```json
{
  "fieldName": "测试自定义日期",
  "fieldType": "string",
  "fieldLabel": "测试自定义自定义11",
  "visible": true,
  "editable": true,
  "required": true,
  "isCustom": 1,
  "isCustomStr": "自定义字段",
  "isLogic": 0,
  "logic": false,
  "expression": ""
}
```

## 注意事项

1. **null 值处理**: 大部分控制属性可能为 `null`，需要合理的默认值处理
2. **逻辑字段**: 带有 `expression` 的字段可能是计算字段，需要特殊处理
3. **字段顺序**: 可根据 `createTime` 或其他字段进行排序
4. **类型扩展**: 未来可能会增加更多字段类型，需要保持扩展性