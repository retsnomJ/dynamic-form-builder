# 动态表单生成模板

## 使用说明

此模板用于指导LLM生成符合动态表单系统规范的JSON配置。请按照此模板提供信息，确保生成的JSON格式一致且完整。

## 表单基础信息模板

```
表单名称: [formName]
表单标题: [formTitle] (可选)
表单描述: [formDescription] (可选)
布局列数: [1-4] (默认2)
标签宽度: [如120px] (默认120px)
标签位置: [left/right/top] (默认right)
```

## 字段信息录入模板

### 字段基础信息
```
字段序号: [1,2,3...]
字段名称: [fieldName] (驼峰命名，如productName)
字段标签: [fieldLabel] (显示名称，如"产品名称")
字段类型: [string/textarea/integer/float/date/select/radio/checkbox]
是否必填: [是/否] (默认否)
是否禁用: [是/否] (默认否)
是否隐藏: [是/否] (默认否)
占位符: [placeholder] (可选)
默认值: [defaultValue] (可选)
字段说明: [description] (可选)
```

### 数据源配置
```
数据来源类型: [手填/静态选项/API接口/计算生成]

如果是"静态选项":
- 选项列表: 
  - 值1: 标签1 [是否禁用] [自定义属性]
  - 值2: 标签2 [是否禁用] [自定义属性]
  - ...

如果是"API接口":
- 接口地址: [url]
- 请求方法: [GET/POST]
- 请求参数: [params对象]
- 请求头: [headers对象] (可选)
- 响应映射: 
  - 值字段: [value字段名]
  - 标签字段: [label字段名]
  - 自定义字段映射: [可选]

如果是"计算生成":
- 依赖字段: [field1, field2, ...]
- 计算函数: [computeFunction名称]
```

### 字段联动配置
```
触发事件: [change/focus/blur/input]
联动动作:
- 动作类型: [设置值/设置选项/显示隐藏/启用禁用/验证]
- 目标字段: [targetField]
- 数据来源: [固定值/表达式/选中项属性]
- 执行条件: [condition表达式] (可选)
```

### 验证规则配置
```
验证规则:
- 必填验证: [是/否] + 错误提示
- 长度验证: 最小[min] 最大[max] + 错误提示
- 格式验证: 正则表达式[pattern] + 错误提示
- 数值验证: 最小值[min] 最大值[max] + 错误提示
- 自定义验证: 验证函数[validator] + 错误提示
```

### 组件特定配置
```
根据字段类型选择对应配置:

文本输入框:
- 可清空: [是/否]
- 最大长度: [maxLength]
- 最小长度: [minLength]
- 显示密码: [是/否]

数字输入框:
- 最小值: [min]
- 最大值: [max]
- 精度: [precision]
- 步长: [step]

日期选择器:
- 显示格式: [format]
- 值格式: [valueFormat]
- 禁用日期: [disabledDate函数]

选择框:
- 可清空: [是/否]
- 可搜索: [是/否]
- 多选: [是/否]
- 多选限制: [multipleLimit]

文本域:
- 行数: [rows]
- 自适应: [是/否]
- 调整方式: [resize]
```

## 完整示例模板

### 示例：用户注册表单

```
表单名称: userRegistrationForm
表单标题: 用户注册
表单描述: 新用户注册信息填写
布局列数: 2
标签宽度: 100px
标签位置: right

字段1:
字段名称: username
字段标签: 用户名
字段类型: string
是否必填: 是
占位符: 请输入用户名
数据来源类型: 手填
验证规则:
- 必填验证: 是 + "用户名不能为空"
- 长度验证: 最小3 最大20 + "用户名长度必须在3-20个字符之间"
- 格式验证: ^[a-zA-Z0-9_]+$ + "用户名只能包含字母、数字和下划线"
组件配置:
- 可清空: 是
- 最大长度: 20

字段2:
字段名称: userType
字段标签: 用户类型
字段类型: select
是否必填: 是
占位符: 请选择用户类型
数据来源类型: 静态选项
选项列表:
- personal: 个人用户
- enterprise: 企业用户
- vip: VIP用户 [自定义属性: level=5]
触发事件: change
联动动作:
- 动作类型: 显示隐藏
- 目标字段: companyName
- 执行条件: selectedOption.value === 'enterprise'

字段3:
字段名称: companyName
字段标签: 公司名称
字段类型: string
是否必填: 是
是否隐藏: 是
占位符: 请输入公司名称
数据来源类型: 手填
验证规则:
- 必填验证: 是 + "公司名称不能为空"
```

## LLM生成指令模板

当使用此模板时，请向LLM提供以下格式的指令：

```
请根据以下信息生成动态表单JSON配置：

[按照上述模板填写的具体信息]

要求：
1. 严格按照动态表单数据格式规范v2.0生成JSON
2. 确保所有必填字段都有值
3. 验证规则要完整且合理
4. 字段联动逻辑要清晰
5. 组件配置要符合字段类型
6. JSON格式要正确且可解析
7. 字段命名使用驼峰命名法
8. 提供合理的默认值和占位符
```

## 注意事项

1. **字段命名规范**: 使用驼峰命名法，避免使用保留字
2. **数据源选择**: 根据实际需求选择合适的数据源类型
3. **联动逻辑**: 保持简单明了，避免循环依赖
4. **验证规则**: 前端验证主要用于用户体验
5. **性能考虑**: 大量选项时考虑使用API数据源
6. **表达式语法**: 支持selectedOption.property和formData.fieldName格式
7. **条件表达式**: 使用JavaScript表达式语法

## 常用表达式示例

```javascript
// 获取选中选项的属性
"selectedOption.code"
"selectedOption.customProperty"

// 获取表单字段值
"formData.category"
"formData.userType"

// 条件判断
"selectedOption.type === 'advanced'"
"formData.price > 100"
"selectedOption.level >= 5 && formData.status === 'active'"

// 复杂计算
"formData.unitPrice * 10"
"formData.quantity * formData.price"
```

## 生成后检查清单

- [ ] JSON格式正确，可以解析
- [ ] 所有必填字段都有值
- [ ] 字段名称使用驼峰命名法
- [ ] 字段类型正确且支持
- [ ] 数据源配置完整
- [ ] 联动逻辑清晰无循环依赖
- [ ] 验证规则合理
- [ ] 组件配置符合字段类型
- [ ] 表达式语法正确
- [ ] 布局配置合理