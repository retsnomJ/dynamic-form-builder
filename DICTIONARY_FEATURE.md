# 字典功能实现说明

## 功能概述

在 JsonGenerator.vue 中实现了字典数据功能，允许用户从接口获取字典类型列表，选择特定字典后自动生成对应的API调用代码。

## 主要功能点

### 1. 字典类型获取
- 调用接口 `GET /admin-api/basedata/basequery/common/listDictTypeInfo?keyword=i`
- 自动加载字典类型列表
- 支持错误处理和加载状态显示

### 2. 字典选择UI
- 在数据源配置中添加"字典数据"选项
- 下拉选择框展示字典名称和标签
- 实时显示加载状态和错误信息

### 3. API代码生成
- 根据选择的字典类型自动生成API调用代码
- 包含完整的请求URL、请求参数和响应处理逻辑
- 支持一键复制生成的代码

### 4. 数据源配置
- 自动生成字典数据源配置
- 包含请求头、参数、响应映射等完整配置
- 自动设置字段类型为select

## 使用流程

1. **添加字段**：在字段配置中添加新字段
2. **选择数据源类型**：在数据源列选择"字典数据"
3. **选择字典类型**：从下拉列表中选择需要的字典
4. **查看生成代码**：在底部查看自动生成的API代码
5. **复制代码**：点击"复制代码"按钮复制生成的代码

## 数据结构

### 字典类型接口响应
```json
{
  "code": 0,
  "data": [
    {
      "name": "IoT 产品状态",
      "type": "iot_product_status", 
      "labels": "已发布、开发中"
    }
  ]
}
```

### 字典数据接口响应
```json
{
  "code": 0,
  "data": [
    {
      "label": "HTTP",
      "value": "1"
    }
  ]
}
```

## 文件结构

- `src/services/dictionaryService.ts` - 字典服务相关函数
- `src/views/JsonGenerator.vue` - 主要组件实现

## 错误处理

- 网络请求失败时显示错误信息
- API返回错误代码时抛出异常
- 提供用户友好的错误提示

## 样式设计

- 字典错误提示使用红色边框和背景
- API代码预览使用等宽字体和语法高亮
- 响应式设计适配不同屏幕尺寸