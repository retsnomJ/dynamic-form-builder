# 新增库存表单 - LLM生成提示词

请生成动态表单JSON配置，具体需求如下：

## 表单基础信息
- 表单名称: inventoryAddForm
- 表单标题: 新增库存
- 表单描述: 添加新的库存记录
- 布局列数: 2
- 标签宽度: 120px
- 标签位置: right

## 字段配置

### 字段1: productId
- 字段标签: 产品选择
- 字段类型: select
- 是否必填: 是
- 占位符: 请输入产品名称搜索
- 数据来源: API接口
  - 接口地址: /api/products/search
  - 请求方法: GET
  - 请求参数: name="{searchKeyword}"
  - 数据路径: data
  - 响应映射: value=partNumber, label=name
  - 自定义数据: partNumber=partNumber, spec=spec
  - 缓存: 是，缓存时间300000ms
- 验证规则: 必填验证，错误提示"请选择产品"
- 联动配置: 当选择产品时，自动填充图号字段(partNumber)，数据来源为selectedOption.partNumber
- 组件配置: 
  - 可清空: 是
  - 可搜索: 是
  - 远程搜索: 是
  - 搜索方法: searchProducts

### 字段2: partNumber
- 字段标签: 图号
- 字段类型: string
- 是否必填: 是
- 是否禁用: 是
- 占位符: 产品选择后自动填充
- 字段说明: 根据选择的产品自动填充图号
- 数据来源: 手填（通过联动自动填充）
- 验证规则: 必填验证，错误提示"图号不能为空"
- 联动配置: 当图号改变时触发以下动作：
  - 如果图号以"BT"开头，设置单位字段为"kg"
  - 如果图号不以"BT"开头，设置单位字段为"件"
- 组件配置:
  - 可清空: 否
  - 只读: 是

### 字段3: unit
- 字段标签: 单位
- 字段类型: select
- 是否必填: 是
- 占位符: 请选择单位
- 默认值: 件
- 数据来源: 静态选项
  - 件: 件
  - kg: 千克(kg)
- 验证规则: 必填验证，错误提示"请选择单位"
- 组件配置:
  - 可清空: 是

### 字段4: quantity
- 字段标签: 数量
- 字段类型: integer
- 是否必填: 是
- 占位符: 请输入数量
- 默认值: 1
- 数据来源: 手填
- 验证规则: 
  - 必填验证，错误提示"请输入数量"
  - 数值验证，最小值1，最大值10，错误提示"数量必须在1-10之间"
- 组件配置:
  - 最小值: 1
  - 最大值: 10
  - 步长: 1
  - 精度: 0位小数
  - 控制按钮位置: 右侧

## 特殊要求
1. 产品选择支持远程搜索，用户输入产品名称时实时查询API
2. 选择产品后自动填充图号，图号字段为只读状态
3. 根据图号前缀自动判断单位：BT开头使用"kg"，其他使用"件"
4. 数量限制在1-10之间，使用数字输入框
5. 表单采用2列布局，标签右对齐
6. 所有必填字段都要有合适的验证提示

## 联动逻辑说明
1. **产品选择 → 图号填充**: 当用户选择产品时，自动将选中产品的partNumber填充到图号字段
2. **图号变化 → 单位切换**: 当图号字段值发生变化时，检查是否以"BT"开头来自动设置单位
3. **表达式语法**: 
   - 获取选中选项属性: `selectedOption.partNumber`
   - 获取表单字段值: `formData.partNumber`
   - 条件判断: `formData.partNumber && formData.partNumber.startsWith('BT')`

## API接口说明
- **接口地址**: `/api/products/search`
- **请求方式**: GET
- **请求参数**: `name` (产品名称关键字)
- **返回格式**: 
  ```json
  {
    "success": true,
    "count": 2,
    "data": [
      {
        "name": "螺栓",
        "partNumber": "BT-001", 
        "spec": "M8×20, 304不锈钢"
      }
    ]
  }
  ```
- **数据映射**: 从data数组中提取，value使用partNumber，label使用name